schema:
  schema_id: moran_fixed
  name: é­”ç„¶Â·å­—è©
  version: "20240115"
  author:
    - è‡ªç„¶ç¢¼ç™¼æ˜äººï¼šå‘¨å¿—è¾²
    - æ–¹æ¡ˆè£½ä½œï¼šksqsf
  description: |
    å››ç¢¼å”¯ä¸€è‡ªå‹•ä¸Šå±ã€äº”ç¢¼é ‚å±çš„ç¢¼è¡¨å¼è¼¸å…¥æ–¹å¼ã€‚

switches:
  - name: ascii_mode
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: simplification
    states: [ æ¼¢å­—, æ±‰å­— ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: emoji
    states: [ ğŸˆš, ğŸˆ¶ ]
  - name: chaifen
    states: [ ä¸æ‹†, æ‰Œæ–¥ ]
  - name: unicode_comment
    states: [ Ué—œ, Ué–‹ ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@zkci
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - reverse_lookup_translator
    - table_translator@custom_phrase       # è‡ªå®šç¾©çŸ­èª
    - table_translator
    - table_translator@fixed
    - table_translator@zkci
    - history_translator@repeat
  filters:
    - simplifier@chaifen
    - simplifier
    - simplifier@emoji
    #- lua_filter@*moran_quick_code_hint  # ç°¡ç¢¼æç¤ºåŠŸèƒ½ï¼Œè©³è¦‹æ–‡ä»¶æœ«
    - uniquifier

speller:
  alphabet: "abcdefghijklmnopqrstuvwxyz="
  delimiter: " '"
  max_code_length: 4
  auto_select: true
  auto_clear: max_length # manual | auto | max_length
  algebra:
    __patch:
      - moran:/algebra/user_force_top?
      - moran:/algebra/user_force_bottom?

translator:
  dictionary: moran_fixed
  db_class: tabledb
  enable_charset_filter: false
  enable_sentence: false
  enable_completion: false
  enable_user_dict: false
  initial_quality: 100000

fixed:
  dictionary: moran_fixed
  db_class: tabledb
  enable_charset_filter: false
  enable_sentence: false
  enable_completion: false
  enable_user_dict: true
  enable_encoder: true
  encode_commit_history: false   # æ˜¯å¦é–‹å•“è‡ªå‹•é€ è©
  initial_quality: 1000

custom_phrase: # è‡ªå®šç¾©çŸ­èª
  dictionary: ""
  user_dict: moran_custom_phrases
  db_class: stabledb
  enable_completion: false
  enable_sentence: false
  initial_quality: 500000

zkci:           # é€ è©
  tag: zkci
  db_class: tabledb
  dictionary: moran_fixed
  enable_user_dict: false
  enable_charset_filter: false
  enable_completion: false
  enable_sentence: true
  enable_encoder: false
  max_phrase_length: 4
  prefix: "'"
  tips: ã€”é€ è©ã€•
  initial_quality: 10

repeat:        # é‡è¤‡ä¸Šå±
  input: "="
  size: 1
  initial_quality: 0

simplifier:
  option_name: simplification
  opencc_config: moran_t2s.json

emoji:
  opencc_config: moran_emoji.json
  option_name: emoji
  tips: all

chaifen:
  option_name: chaifen
  opencc_config: moran_chaifen.json
  tips: char
  show_in_comment: true
  comment_form:
    - "xform/-/ /"

reverse_lookup:
  dictionary: moran.chars
  enable_user_dict: false
  tips: ã€”é€šé…ã€•

recognizer:
  import_preset: default
  patterns:
    reverse_lookup: "(^(`[a-z`]+))|(^([a-z]{2}(`[a-z`]?|[a-z`]`)))"
    zkci: "^[a-z]*'[a-z']*$"
    punct: '^/([0-9]0?|[A-Za-z]+)$'

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default
  # å–æ¶ˆä¸‹é¢çš„è¨»é‡‹å¾Œï¼ŒæŒ‰ä½ = ä¸æ”¾å¯ä»¥é€£çºŒé‡è¤‡ä¸Šå±
  # my_bindings:
  #   __append:
  #     - when: has_menu
  #       accept: '='
  #       send: 4     # å°æ‡‰æ–¼ history_translator çš„è¼¸å‡ºä½ç½®ï¼Œä¿®æ”¹ symbols.yaml å¾Œéœ€è¦ä½œç›¸æ‡‰ä¿®æ”¹
  bindings:
    __patch:
      - key_binder/my_bindings?
      - moran:/key_bindings/moran_switches
      - moran:/key_bindings/moran_semicolon_for_2

# é»˜èªä¸é–‹å•“èªè¨€æ¨¡å‹
# åœ¨ moran_fixed.custom.yaml ä¸­è¼¸å…¥å¦‚ä¸‹å…§å®¹ä»¥é–‹å•“
#   patch:
#     __include: moran:/octagram/enable_for_fixed
# è¼¸å…¥ã€Œæ°´æ»¿å‰‡ã€å¾Œç¹¼çºŒè¼¸å…¥ yidy é¦–é¸çˆ²ã€Œæº¢ã€å‰‡èªªæ˜å·²ç”Ÿæ•ˆã€‚

moran:
  # ç°¡å¿«ç¢¼æç¤ºæ¿¾é¡
  # ä¾‹å¦‚ï¼Œåœ¨è¼¸å…¥ jqrf æ™‚ï¼Œã€Œæ©Ÿå™¨äººã€å€™é¸æœƒå¢åŠ ã€Œâš¡jqrã€æç¤ºï¼Œè¡¨ç¤ºè©²è¯æœ‰ç°¡ç¢¼æ‰“æ³•ã€‚
  # æ³¨æ„ï¼šéœ€å…ˆè§£é™¤ engine/filters ä¸­ lua_filter@*moran_quick_code_hint è¡Œçš„è¨»é‡‹æ‰èƒ½ç”Ÿæ•ˆï¼ï¼
  enable_quick_code_hint: true      # åœ¨è§£é™¤ lua_filter è¨»é‡‹å‰ä¸ç”Ÿæ•ˆï¼
  quick_code_hint_skip_chars: true  # æ˜¯å¦è·³éå–®å­—, å­—è©æ¨¡å¼ä¸­å»ºè­°ä¸æç¤ºå–®å­—é¿å…å¹²æ“¾
