schema:
  schema_id: moran
  name: é­”ç„¶
  version: "20240115"
  author:
    - è‡ªç„¶ç¢¼ç™¼æ˜äººï¼šå‘¨å¿—è¾²
    - æ–¹æ¡ˆè£½ä½œï¼šksqsf
  description: |
    çˆ²å‚³æ‰¿å­—è¨­è¨ˆçš„è‡ªç„¶ç¢¼åŠè¼”åŠ©ç¢¼æ™ºèƒ½æ•´å¥è¼¸å…¥æ–¹æ¡ˆã€‚
  dependencies:
    - moran_fixed
    - moran_sentence
    - moran_reverse
    - moran_english
    - moran_charset
    #- moran_japanese # æ—¥èªæ··è¼¸
    - stroke
    - tiger
    - cangjie5
    - zrlf

switches:
  - name: ascii_mode
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: simplification
    states: [ æ¼¢å­—, æ±‰å­— ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: extended_charset
    states: [ é€šç”¨, å¢å»£ ]
  - name: inflexible
    states: [ å‹•è©, å›ºè© ] # ã€Œå›ºè©ã€è¡¨ç¤ºã€Œå›ºé ‚è©ã€
    # é»˜èªæƒ…æ³ä¸‹ï¼Œè¼¸å…¥ 4 ç¢¼æ™‚ï¼Œæœƒç¦æ­¢ç¢¼è¡¨è¼¸å‡ºï¼ˆã€Œå‹•è©ã€æ¨¡å¼ï¼‰ã€‚
    # é€™æ˜¯å› çˆ²ç¢¼è¡¨æœ€å¤§ç¢¼é•·çˆ² 4ï¼Œå¯èƒ½æœƒç”¢ç”Ÿè¼ƒä½é »çš„å¤šå­—è©ï¼Œè¦†è“‹éç”¨æˆ¶è‡ªé€ çš„å¸¸ç”¨è©èªã€‚
    # ç•¶å›ºè©æ¨¡å¼å•“å‹•å¾Œï¼Œè¼¸å…¥ 4 ç¢¼æ™‚æœƒå„ªå…ˆè¼¸å‡ºç¢¼è¡¨ä¸­çš„äºŒå­—è©ï¼Œé€™äº›è¼¸å‡ºå¸¶æœ‰ã€Œâš¡ï¸ã€æ¨™è¨˜ã€‚
  - name: emoji
    states: [ ğŸˆš, ğŸˆ¶ ]
  - name: chaifen
    states: [ ä¸æ‹†, æ‰Œæ–¥ ]
  - name: unicode_comment
    states: [ Ué—œ, Ué–‹ ]
  - options: [ std_opencc,  std_tw, std_hk, std_dzing ]
    reset: 0
    states: [ é€š, è‡º, æ¸¯, å¯ ]

engine:
  processors:
    - key_binder
    - lua_processor@*moran_semicolon_processor
    - ascii_composer
    - recognizer
    - speller
    - punctuator
    - lua_processor@*moran_launcher     # è¼¸å…¥ omorj æˆ– ogrwh å¾Œå›è»Šæ‰“é–‹é­”ç„¶å®˜ç¶²
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - reverse_lookup_translator@reverse_universal
    - reverse_lookup_translator@reverse_tiger
    - reverse_lookup_translator@reverse_stroke
    - reverse_lookup_translator@reverse_cangjie5
    - reverse_lookup_translator@reverse_zrlf
    - table_translator@custom_phrase       # è‡ªå®šç¾©çŸ­èª
    - table_translator@english             # è‹±èªæ··è¼¸
    #- table_translator@japanese            # æ—¥èªæ··è¼¸
    - lua_translator@*moran_express_translator@with_reorder # ç¿»è­¯å™¨
    - lua_translator@*moran_shijian        # æ—¥æœŸorq ç¯€æ°£ojq æ˜ŸæœŸoxq æ™‚é–“osj
    - lua_translator@*moran_number         # æ•¸å­—è½‰å¤§å¯«, å¤§å¯«Så¼•å°, å¦‚ S123
  filters:
    - lua_filter@*moran_charset_filter
    - lua_filter@*moran_reorder_filter
    - lua_filter@*moran_aux_hint
    - lua_filter@*moran_quick_code_hint
    - simplifier@emoji
    - simplifier@chaifen
    - simplifier@std_hk
    - simplifier@std_tw
    - simplifier@std_dzing
    - simplifier
    - lua_filter@*moran_charset_comment_filter  # Unicode å€ä½æç¤º
    - lua_filter@*moran_unicode_display_filter  # Unicode ç·¨ç¢¼æç¤º
    - uniquifier

speller:
  alphabet: abcdefghijklmnopqrstuvwxyz/
  delimiter: " '"
  algebra:
    __patch:
      - moran:/algebra/user_force_top?
      - moran:/algebra/user_sentence_top?
      - moran:/algebra/generate_code
      - moran:/algebra/user_sentence_bottom?
      - moran:/algebra/user_force_bottom?

translator:    # æ•´å¥è¼¸å…¥æ¨¡å¼è¨­ç½®ï¼Œåœ¨ top_translator ä¸­è¢«èª¿ç”¨
  dictionary: moran.extended
  prism: moran
  initial_quality: 5
  max_homophones: 7
  spelling_hints: 3
  contextual_suggestions: true
  preedit_format:
    - xform/([a-z][a-z][a-z][a-z])o/$1Â°/

fixed:         # å›ºé ‚è¼¸å…¥æ¨¡å¼è¨­ç½®ï¼Œåœ¨ top_translator ä¸­è¢«èª¿ç”¨
  dictionary: moran_fixed
  initial_quality: 100
  enable_completion: false
  enable_sentence: false
  enable_user_dict: false
  enable_encoder: false
  encode_commit_history: true

custom_phrase: # è‡ªå®šç¾©çŸ­èª
  dictionary: ""
  user_dict: moran_custom_phrases
  db_class: stabledb
  enable_completion: false
  enable_sentence: false
  initial_quality: 1000

english:
  dictionary: moran_english
  enable_completion: true
  enable_sentence: false
  enable_user_dict: true
  initial_quality: 1
  enable_encoder: false
  encode_commit_history: false
  comment_format:
    - xform/.*//

japanese:
  dictionary: moran_japanese
  enable_completion: false
  enable_sentence: true
  enable_user_dict: true
  initial_quality: 0
  enable_encoder: false
  encode_commit_history: false
  comment_format:
    - xform/.*//

simplifier:
  option_name: simplification
  opencc_config: moran_t2s.json

chaifen:
  option_name: chaifen
  opencc_config: moran_chaifen.json
  tips: char
  show_in_comment: true
  comment_form:
    - "xform/-/ /"

emoji:
  opencc_config: moran_emoji.json
  option_name: emoji
  tips: none

std_hk:
  opencc_config: t2hk.json
  option_name: std_hk
  #tips: all

std_tw:
  opencc_config: t2tw.json
  option_name: std_tw
  #tips: all

std_dzing:
  opencc_config: moran_dzing.json
  option_name: std_dzing
  tips: all

reverse_format:
  comment_format:
    - xform/(\w\w);(\w\w)/$1[$2]/
  preedit_format:
    - xform/^o(lf|bh|cj)//

reverse_tiger:
  tag: reverse_tiger
  dictionary: tiger
  enable_completion: true
  prefix: "`"
  tips: ã€”è™ç¢¼ã€•
  __include: reverse_format

reverse_universal:
  tag: reverse_universal
  dictionary: moran.chars
  tips: ã€”é€šé…ã€•
  __include: reverse_format

reverse_stroke:
  tag: reverse_stroke
  dictionary: stroke
  prefix: "obh"
  enable_completion: true
  tips: ã€”æ©«hè±sæ’‡pæºnæŠ˜zã€•
  __include: reverse_format

reverse_cangjie5:
  tag: reverse_cangjie5
  dictionary: cangjie5
  prefix: "ocj"
  enable_completion: true
  tips: ã€”å€‰é ¡äº”ä»£ã€•
  __include: reverse_format

reverse_zrlf:
  tag: reverse_zrlf
  dictionary: zrlf
  prefix: "olf"
  enable_completion: true
  tips: ã€”å…©åˆ†ã€•
  __include: reverse_format

reverse_lookup:
  extra_tags:
    - reverse_tiger
    - reverse_universal
    - reverse_stroke
    - reverse_cangjie5
    - reverse_zrlf

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default
  bindings:
    __patch:
      - moran:/key_bindings/moran_capital_for_last_syllable
      - moran:/key_bindings/moran_tab
      - moran:/key_bindings/moran_switches

recognizer:
  import_preset: default
  patterns:
    reverse_universal: "(^(`[a-z`]+))|(^([a-z]{2}(`[a-z`]?|[a-z`]`)))"
    reverse_tiger: "(^`$)|(^`[a-zA-Z]+$)"
    reverse_stroke: "^obh[A-Za-z]*$"
    reverse_cangjie5: "^ocj[A-Za-z]*$"
    reverse_zrlf: "^olf[A-Za-z]*$"
    punct: '^/([0-9]0?|[A-Za-z]+)$'

moran:
  # ç°¡å¿«ç¢¼æç¤ºç¬¦
  # ä¿®æ”¹çˆ² "" å¯å–æ¶ˆæç¤ºç¬¦
  # å»ºè­°åœ¨ç†Ÿæ‚‰ç°¡ç¢¼å¾Œå†å–æ¶ˆ
  quick_code_indicator: "âš¡ï¸"

  # è©è¼”åŠŸèƒ½
  # ç•¶è¼¸å…¥äºŒå­—æˆ–ä¸‰å­—è©æ™‚ï¼Œå…è¨±è©æœ«è¼¸å…¥ *ä¸€ä½* è¼”åŠ©ç¢¼ç¯©é¸è©èªã€‚
  # ä¾‹å¦‚è¼¸å…¥ lmjxz å¾—åˆ°ã€Œé€£æ¥ã€ï¼Œè¼¸å…¥ lmjxj å¾—åˆ°ã€Œéˆæ¥ã€ã€‚
  # ä½†æ˜¯èˆ‡å­—è¼”è¼¸å…¥æ–¹æ³•ä¸åŒï¼Œè©è¼”åœ¨ç”Ÿæ•ˆå¾Œ *ä¸èƒ½* åœ¨å¥æœ«ç¹¼çºŒè¼¸å…¥å½¢æˆæ•´
  # å¥â€”â€”é€™å€‹åŠŸèƒ½åƒ…ç”¨æ–¼ã€Œè©èªç¯©é¸ã€ã€‚å› æ­¤ï¼Œé€™å€‹åŠŸèƒ½åƒ…é©åˆç¿’æ…£æ–¼ä»¥è©èª
  # çˆ²å–®ä½è¼¸å…¥çš„ç”¨æˆ¶ï¼Œå› æ­¤é»˜èªæ˜¯é—œé–‰çš„ã€‚
  #
  # é–‹å•“å¾Œï¼Œè©è¼”ç¯©é¸çš„è©èªæœƒå¸¶æœ‰è¼”åŠ©ç¢¼æç¤ºï¼Œä¾‹å¦‚ã€Œéˆæ¥ã€å¾Œæœƒæœ‰ã€Œjfã€ï¼Œ
  # æ„æ€æ˜¯è¼¸å…¥ j *æˆ–* f éƒ½å¯ä»¥å®šä½åˆ°é€™å€‹è©ï¼Œè€Œä¸æ˜¯èªªè¦åŒæ™‚è¼¸å…¥ jf å…©å€‹ç¢¼
  # ï¼ˆç›¸åï¼ŒåŒæ™‚è¼¸å…¥ jf å…©ç¢¼å¾Œåè€Œç„¡æ³•å¾—åˆ°è©²é¸é …ï¼‰ã€‚
  enable_word_filter: false

  # ã€Œå‡ºç°¡è®“å…¨ã€ç›¸é—œè¨­ç½®
  # ç•¶ä¸€å€‹å­—å…·æœ‰ç°¡ç¢¼æ™‚ï¼Œæ‰“å…¶å…¨ç¢¼ï¼ˆä¸è«–æ˜¯ yyxx é‚„æ˜¯ yyxxoï¼‰éƒ½æœƒå°è‡´è©²
  # å­—è®“å‡ºé¦–ä½ï¼Œè€Œè¢«æ¨é²åˆ°å¾Œä½ã€‚
  ijrq:
    enable: true       # æ˜¯å¦å•“ç”¨å‡ºç°¡è®“å…¨ï¼Ÿ
    #defer: 5          # å»¶é²å¤šå°‘ä½ï¼Ÿè‹¥ä¸è¨­ç½®è¯¥é¡¹ï¼Œæˆ–å€¼å°æ–¼ç­‰æ–¼ 0ï¼Œå‰‡æ¨é²åˆ°ç¬¬äºŒé çš„é¦–é¸
    show_hint: true    # è‹¥è®“å…¨ï¼Œå‰‡æç¤ºç°¡ç¢¼æ‰“æ³•

  # å–®å­—è¼”åŠ©ç¢¼æç¤º
  # æ³¨ï¼šæœƒé¡¯ç¤ºå‡ºæ‰€æœ‰å¯èƒ½çš„è¼”åŠ©ç¢¼
  enable_aux_hint: false

  # ç°¡å¿«ç¢¼æç¤ºï¼ˆåŒ…æ‹¬å­—å’Œè©ï¼‰
  # ä¾‹å¦‚ è¼¸å…¥ yy te er è‹±ç‰¹çˆ¾ æœƒæç¤ºã€Œâš¡yteã€ï¼Œå³ä½¿ç”¨ yte å¯ä»¥æ‰“å‡ºé€™å€‹è©
  enable_quick_code_hint: false

  # è¼¸å…¥å››ç¢¼æ™‚ï¼Œå¦‚æœç°¡ç¢¼ç¢¼è¡¨ä¸­å«æœ‰å°æ‡‰æ¢ç›®ï¼Œå‰‡æ”¾ç½®åœ¨ç¬¬äºŒé¸é …ã€‚
  show_chars_anyway: false   # æ˜¯å¦è¼¸å‡ºç°¡ç¢¼ç¢¼è¡¨å–®å­—ï¼Œä¾‹ï¼šè¼¸å…¥ jwrg æ™‚ï¼Œæ¬¡é¸çˆ²ã€Œä½³ã€
  show_words_anyway: false   # æ˜¯å¦è¼¸å‡ºç°¡ç¢¼ç¢¼è¡¨è©èªï¼Œä¾‹ï¼šè¼¸å…¥ lmsd æ™‚ï¼Œæ¬¡é¸çˆ²ã€Œå…©é¢ä¸‰åˆ€ã€

# é»˜èªå•“ç”¨èªè¨€æ¨¡å‹
__include: moran:/octagram/enable_for_sentence
# è‹¥è¦ç¦ç”¨ï¼Œå¯ç›´æ¥åˆªæ‰ä¸Šé¢çš„ __includeï¼Œæˆ–åœ¨ custom æ–‡ä»¶ä¸­å¯«å…¥ï¼š
# patch:
#   __include: moran:/octagram/disable
