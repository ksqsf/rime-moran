schema: moran
source_dir: ..
deploy:
  # å‡ºå» è¨­ç½®
  default:
    tests:
      - send: l
        assert: cand[1].text == "äº†" and cand[1].comment == "âš¡ï¸"
      - send: le
        assert: cand[1].text == "æ¨‚" and cand[1].comment == "âš¡ï¸"
      - send: lem
        assert: cand[1].text == "æ¨‚" and cand[1].comment == "âš¡ï¸"
      - send: lemd
        assert: cand[1].text == "æ¥½" and cand[1].comment == ""
      - send: hello  # è‹±èªæ··è¼¸
        assert: cand[1].text == "hello"
      - send: jis
        assert: cand[1].text == "ç´š" and cand[1].comment == "âš¡ï¸"
      - send: jisjo  # å‡ºç°¡è®“å…¨
        assert: cand[1].text == "ç´€"

  # é¡æ–‡å­—ï¼Œæ¸¬è©¦ has_emoji è¦å‰‡
  emoji:
    options:
      emoji: true
    tests:
      - send: hk
        assert: cand[2].text == "ğŸ‘Œ"
      - send: o
        assert: cand[2].text == "ğŸ˜¯"
      - send: ou
        assert: cand[2].text == "â‚¬"
      - send: mzgo
        assert: cand[2].text == "ğŸ‡ºğŸ‡¸"
      - send: vsgo
        assert: cand[2].text == "ğŸ‡¨ğŸ‡³"

  # è‡ªå®šç¾©ç°¡å¿«ç¢¼
  quick_code_indicator_empty:
    patch:
      moran/quick_code_indicator: ""
    tests:
      - send: l
        assert: cand[1].text == "äº†" and cand[1].comment == ""
  quick_code_indicator_other:
    patch:
      moran/quick_code_indicator: "ğŸ’¥"
    tests:
      - send: l
        assert: cand[1].text == "äº†" and cand[1].comment == "ğŸ’¥"
      - send: le
        assert: cand[1].text == "æ¨‚" and cand[1].comment == "ğŸ’¥"
      - send: lem
        assert: cand[1].text == "æ¨‚" and cand[1].comment == "ğŸ’¥"
      - send: lemd
        assert: cand[1].text == "æ¥½" and cand[1].comment == ""

  # è©è¼”
  word_filter:
    patch:
      moran/enable_word_filter: true
    tests:
      - send: lmjx
        assert: cand[1].text == "éˆæ¥"
      - send: lmjxz
        assert: cand[1].text == "é€£æ¥"

  # pin
  pin:
    options:
      emoji: false
    tests:
      - send: 'lmjx'
        assert: cand[1].text == 'éˆæ¥' and cand[2].text == 'é€£æ¥'
      - send: 'lmjx{Control+t}'  # SIDE-EFFECT!!
        assert: cand[1].comment == "ğŸ“Œ"
      - send: 'lmjx{Control+t}'
        assert: cand[1].comment == ""
      - send: 'lmjx{Down}{Control+t}'
        assert: cand[1].text == 'é€£æ¥' and cand[1].comment == "ğŸ“Œ"
      - send: 'lmjx'
        assert: cand[1].text == 'é€£æ¥' and cand[1].comment == "ğŸ“Œ"
