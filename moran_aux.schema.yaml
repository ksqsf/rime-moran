schema:
  schema_id: moran_aux
  name: é­”ç„¶Â·è¼”ç¯©
  version: "20240926"
  author:
    - è‡ªç„¶ç¢¼ç™¼æ˜äººï¼šå‘¨å¿—è¾²
    - æ–¹æ¡ˆè£½ä½œï¼šksqsf
  description: |
    åœ¨è¼¸å…¥å®Œç•¢é›™æ‹¼ç¢¼å¾Œï¼Œå¯ä»¥è¼¸å…¥è¼”åŠ©ç¢¼ç¯©é¸å€™é¸é …ï¼Œèˆ‡ã€Œé­”ç„¶ã€æ–¹æ¡ˆä¸åŒã€‚
  dependencies:
    - tiger
    - moran_charset
    - moran_english
    #- moran_japanese

switches:
  - name: ascii_mode
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: simplification
    states: [ æ¼¢å­—, æ±‰å­— ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: extended_charset
    states: [ é€šç”¨, å¢å»£ ]
  - name: emoji
    states: [ ğŸˆš, ğŸˆ¶ ]
  - name: unicode_comment
    states: [ Ué—œ, Ué–‹ ]
  - name: dzing
    states: [ é€š, å¯ ]
  - options: [ std_opencc,  std_tw, std_hk, std_dzing ]
    states: [ é€š, è‡º, æ¸¯, å¯ ]

engine:
  processors:
    - key_binder
    - ascii_composer
    - recognizer
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - reverse_lookup_translator@reverse_tick
    - reverse_lookup_translator@reverse_universal
    - reverse_lookup_translator@reverse_tiger
    - reverse_lookup_translator@reverse_stroke
    - reverse_lookup_translator@reverse_cangjie5
    - reverse_lookup_translator@reverse_zrlf
    - table_translator@custom_phrase       # è‡ªå®šç¾©çŸ­èª
    - table_translator@english             # è‹±èªæ··è¼¸
    #- table_translator@japanese            # æ—¥èªæ··è¼¸
    #- table_translator@fixed             # æ›æ¥ç”¨æ³•
    - lua_translator@*moran_aux_translator
  filters:
    #- lua_filter@*moran_aux_hint           # è¼”åŠ©ç¢¼æç¤ºéœ€è¦å»æ‰æœ¬è¡Œé–‹é ­çš„ # ç¬¦è™Ÿ
    - lua_filter@*moran_charset_filter     # å­—é›†éæ¿¾éœ€è¦å»æ‰æœ¬è¡Œé–‹é ­çš„ # ç¬¦è™Ÿ
    - lua_filter@*moran_fix_filter
    - simplifier
    - simplifier@emoji
    - simplifier@std_tw
    - simplifier@std_hk
    - simplifier@std_dzing
    - uniquifier

speller:
  alphabet: abcdefghijklmnopqrstuvwxyz
  delimiter: " '"
  aux_algebra:
    __append:
      - derive/^(.*);(\w)(\w)$/$1/
  algebra:
    __patch:
      - moran:/algebra/user_force_top?
      - moran:/algebra/user_sentence_top?
      - :/speller/aux_algebra
      - moran:/algebra/user_sentence_bottom?
      - moran:/algebra/user_force_bottom?

translator:
  dictionary: moran.extended
  prism: moran_aux
  initial_quality: 5
  preedit_format:
    - xform/([a-z][a-z][a-z][a-z])o/$1Â°/

custom_phrase: # è‡ªå®šç¾©çŸ­èª
  dictionary: ""
  user_dict: moran_custom_phrases
  db_class: stabledb
  enable_completion: false
  enable_sentence: false
  initial_quality: 10

# æ›æ¥ç”¨æ³•ï¼Œéœ€è§£é™¤ translators ä¸­å°æ‡‰çš„è¨»é‡‹
fixed:
  dictionary: moran_fixed
  initial_quality: 10
  enable_completion: false
  enable_sentence: false
  enable_user_dict: false
  enable_encoder: false
  encode_commit_history: true

english:
  dictionary: moran_english
  enable_completion: false
  enable_sentence: false
  initial_quality: 1

japanese:
  dictionary: moran_japanese
  enable_completion: false
  enable_sentence: false
  initial_quality: 0

simplifier:
  option_name: simplification
  opencc_config: moran_t2s.json

emoji:
  opencc_config: moran_emoji.json
  option_name: emoji
  tips: all

std_hk:
  opencc_config: t2hk.json
  option_name: std_hk

std_tw:
  opencc_config: t2tw.json
  option_name: std_tw

std_dzing:
  opencc_config: moran_dzing.json
  option_name: std_dzing
  tips: all

reverse_format:
  comment_format:
    - xform/(\w\w);(\w\w)/$1[$2]/
  preedit_format:
    - xform/^o(lf|bh|cj|vy|hm)//

reverse_tiger:
  tag: reverse_tiger
  dictionary: tiger
  enable_completion: true
  prefix: "ohm"
  tips: ã€”è™ç¢¼ã€•
  __include: reverse_format

reverse_universal:
  tag: reverse_universal
  dictionary: moran.chars
  tips: ã€”é€šé…ã€•
  __include: reverse_format

reverse_stroke:
  tag: reverse_stroke
  dictionary: stroke
  prefix: "obh"
  enable_completion: true
  tips: ã€”æ©«hè±sæ’‡pæºnæŠ˜zã€•
  __include: reverse_format

reverse_cangjie5:
  tag: reverse_cangjie5
  dictionary: cangjie5
  prefix: "ocj"
  enable_completion: true
  tips: ã€”å€‰é ¡äº”ä»£ã€•
  __include: reverse_format

reverse_zrlf:
  tag: reverse_zrlf
  dictionary: zrlf
  prefix: "olf"
  enable_completion: true
  tips: ã€”å…©åˆ†ã€•
  __include: reverse_format

reverse_tick:
  __include: reverse_tiger
  tag: reverse_tick
  prefix: "`"

reverse_lookup:
  extra_tags:
    - reverse_tiger
    - reverse_universal
    - reverse_stroke
    - reverse_cangjie5
    - reverse_zrlf
    - reverse_tick

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default
  custom_bindings:
    __append:
      # åœ¨é€™è£æ·»åŠ åªåœ¨æœ¬æ–¹æ¡ˆä¸­ç”Ÿæ•ˆçš„æŒ‰éµç¶å®š
  bindings:
    __patch:
      - :/key_binder/custom_bindings?
      - moran:/key_bindings/moran_switches
      - moran:/key_bindings/moran_tab
      - moran:/key_bindings/moran_capital_for_last_syllable
      - moran:/key_bindings/moran_semicolon_for_2
      - moran:/key_bindings/moran_keypad

recognizer:
  import_preset: default
  patterns:
    punct: '^/([0-9]0?|[A-Za-z]+)$'
    # åæŸ¥
    reverse_universal: "(^(`[a-z`]+))|(^([a-z]{2}(`[a-z`]?|[a-z`]`)))"
    reverse_tick: "(^`$)|(^`[a-zA-Z]+$)"
    reverse_tiger: "^ohm[a-z]+$"
    reverse_stroke: "^obh[a-z]*$"
    reverse_cangjie5: "^ocj[a-z]*$"
    reverse_zrlf: "^olf[a-z]*$"

moran:
  # é å–å€‹æ•¸ã€‚
  # è¨­ç½®çˆ²å°æ–¼ç­‰æ–¼ 0 çš„æ•¸ç›¸ç•¶æ–¼ç„¡é™åˆ¶ã€‚
  # è¨­ç½®çˆ²æ­£æ•¸æ™‚ï¼šæ•¸å­—è¶Šå°ï¼Œé€Ÿåº¦è¶Šå¿«ï¼›æ•¸å­—è¶Šå¤§ï¼Œèƒ½è¢«è¼”åˆ°å­—å°±è¶Šå¤šã€‚
  # é»˜èªçˆ²ç„¡é™åˆ¶ï¼Œå¦‚æœåœ¨æŸäº›æ€§èƒ½è¼ƒä½çš„è¨­å‚™ä¸Šä½¿ç”¨æ™‚æ„Ÿåˆ°å¡é “ï¼Œå¯ä»¥è¨­ç½®çˆ² 50 æˆ–æ›´å°çš„æ•¸å­—ã€‚
  prefetch: -1

  # å›ºå®šä¸€äºŒç´šç°¡ç¢¼ã€‚åƒè€ƒè¨­ç½®ï¼š
  quick_code_indicator: "âš¡"
  fix:
    d: çš„
    l: äº†
    j: å°±
  # è¯ç»„ä¼˜å…ˆ
  phrase_first: true
  # è¾“å…¥è¾…åŠ©ç ï¼Œé¦–é€‰åç§»
  aux_priority: true
  # è¾…åŠ©ç ä½œç”¨ä½ç½®, first, last, any
  aux_position: any

# é»˜èªå•“ç”¨èªè¨€æ¨¡å‹
__include: moran:/octagram/enable_for_sentence
